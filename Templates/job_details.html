<!DOCTYPE html>
<html>

<head>
  <title>Job Details</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      background: linear-gradient(135deg, #000000, #0f3d2e);
      color: white;
      font-family: "Segoe UI", sans-serif;
    }

    .card-box {
      background: #0b0b0b;
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 0 40px rgba(0, 255, 140, 0.25);
    }

    .job-title {
      color: #00ff99;
      font-weight: 700;
      font-size: 32px;
    }

    .status-badge-open {
      background: #00ff99;
      color: black;
      font-weight: 600;
    }

    .status-badge-closed {
      background: #dc3545;
      font-weight: 600;
    }

    .btn-neon {
      background-color: #00ff99;
      border: none;
      color: black;
      font-weight: 600;
    }

    .btn-neon:hover {
      background-color: #00cc7a;
      color: black;
    }

    .summary-text {
      color: #cfcfcf;
      margin-top: 15px;
    }
  </style>
</head>

<body>

  <div class="container mt-5">
    <div class="card-box">

      <!-- Row: Title + Applicants -->
      <div class="d-flex justify-content-between align-items-center">

        <div>
          <div class="job-title">
            {{ job[1] }}
          </div>

          {% if job[4] == 'Open' %}
          <span class="badge status-badge-open mt-2">Open</span>
          {% else %}
          <span class="badge status-badge-closed mt-2">Closed</span>
          {% endif %}
        </div>

        <div class="text-end">
          <h5>Total Applicants</h5>
          <h3 style="color:#00ff99;">{{ total_applicants }}</h3>
        </div>

      </div>

      <hr style="border-color:#1f1f1f;">

      <!-- Short Summary -->
      <div class="summary-text">
        <div id="shortDesc">
          {{ job[2][:250] }}...
          <a href="javascript:void(0)" onclick="showFull()" style="color:#00ff99;">View More</a>
        </div>

        <div id="fullDesc" style="display:none; white-space: pre-line;">
          {{ job[2] }}
          <br>
          <a href="javascript:void(0)" onclick="showLess()" style="color:#00ff99;">View Less</a>
        </div>
      </div>

      <br><br>

      <!-- Buttons -->
      <div class="d-flex gap-3 flex-wrap">

        <a href="/admin/job/{{ job[0] }}" class="btn btn-neon">
          View Applicants
        </a>

        <a href="/edit-job/{{ job[0] }}" class="btn btn-warning">
          Edit Job
        </a>

        {% if job[4] == 'Open' %}
        <a href="/close-job/{{ job[0] }}" class="btn btn-danger">
          Close Application
        </a>
        {% else %}
        <a href="/reopen-job/{{ job[0] }}" class="btn btn-success">
          Reopen Job
        </a>
        {% endif %}

        <a href="/admin" class="btn btn-secondary">
          Back
        </a>

      </div>


    </div>
  </div>

  <script>
    function showFull() {
      document.getElementById("shortDesc").style.display = "none";
      document.getElementById("fullDesc").style.display = "block";
    }

    function showLess() {
      document.getElementById("shortDesc").style.display = "block";
      document.getElementById("fullDesc").style.display = "none";
    }
  </script>

</body>

</html>